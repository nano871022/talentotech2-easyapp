<div class="container-fluid mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3>Panel de Administración</h3>
    <button class="btn btn-danger" (click)="logout()">Cerrar Sesión</button>
  </div>

  <div *ngIf="isLoading" class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <p>Cargando solicitudes...</p>
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <div *ngIf="!isLoading && !errorMessage" class="card">
    <div class="card-header">
      <h4>Solicitudes de Asesoría Recibidas</h4>
    </div>
    <div class="card-body">
      <div *ngIf="solicitudes.length === 0; else table" class="text-center">
        <p>No hay solicitudes de asesoría por el momento.</p>
      </div>

      <ng-template #table>
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Correo</th>
                <th>Teléfono</th>
                <th>Estado</th>
                <th>Fecha de Creación</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let solicitud of solicitudes">
                <td>{{ solicitud.id }}</td>
                <td>{{ solicitud.nombre }}</td>
                <td>{{ solicitud.correo }}</td>
                <td>{{ solicitud.telefono || 'No provisto' }}</td>
                <td>
                  <span class="badge" [ngClass]="{'bg-primary': solicitud.estado === 'pendiente', 'bg-success': solicitud.estado === 'contactado'}">
                    {{ solicitud.estado | titlecase }}
                  </span>
                </td>
                <td>{{ solicitud.created_at | date:'yyyy-MM-dd HH:mm' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </ng-template>
    </div>
  </div>
</div>